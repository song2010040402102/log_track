<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="common.css">
	<style type="text/css">
	</style>
</head>
<body>
	<h1 style="text-align: center;">指标表达式</h1>
	<p>原始数据经过程序运算统一转成多维表结构的指标，这些指标可称其为指标元，最终想看到的除了零散的指标元之外，还需要由指标元组成的内容，这个过程就需要由指标表达式来完成。其中可分为两部分，一种是展现方式，包括维度转化及合并，若忽略日期维度，则通常我们看到的是一维表，有几种类型就会加几个维度，维度转化包含升维和降维，升维则是把同类的低维表合并成高维表，这种需求少见，暂不实现，降维则是把高维表进行线性化，通常都是线性到一维，因此指标元维度转化暂仅实现从高维降成一维，而不同维度之间的指标元合并，因为没有相应的规则集来进行合并，且同高维指标元之间合并需要严格保证类型种类和数量相同，亦少见，所以只需要做一维表的合并，而一维表合并过程涉及字段选取，按照多维数组方式选取即可；另一种是新字段生成，新字段生成需要先取操作数，再对操作数进行运算，最后再对结果进行修饰，操作数可以选多个，但每个操作数都只能是一个现有的字段，不能是多个字段，否则运算规则就会错乱，运算除了常见的加减乘除之外，还要有括号及函数支持，并保证运算的优先级，至于结果修饰，目前仅想到百分比转换及新字段命名，这里比较好扩展，但对于高维指标元内的新字段生成暂不支持，因为直接在程序内写可能更方便。以下则为指标表达式的语法及demo的简要介绍</p>
	<ul>
		<li>多维指标降一维: e</li>
		<li>单字段查找: e.0.2.1</li>
		<li>多字段查找: e.0.2</li>
		<li>字段范围查找: e.0.0~1.1~3</li>
		<li>指标内运算: c.0/(c.0+c.2+c.4+c.6+c.8)</li>
		<li>跨指标运算: b.1/a.2</li>
		<li>新字段命名: "ARPU"b.1/a.2</li>
		<li>计算百分比: "占比"%c.0/(c.0+c.2+c.4+c.6+c.8)</li>
		<li>函数运算(求均值): "均值"aver(c.0, c.2, c.4, c.6, c.8)</li>
		<li>多字段合并: a.1~2;c.0;c.2;c.4;c.6;c.8;"均值"aver(c.0, c.2, c.4, c.6, c.8)</li>
	</ul>
</body>
</html>